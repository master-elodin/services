def name = "Services"
def version = '0.0.1'

task combineJs {
    inputs.dir("src")
    outputs.dir("bin")

    def SPECIAL_TAGS = ["HEADER", "FOOTER"]

    def binFolder = new File("bin")
    if(!binFolder.exists()) {
        binFolder.mkdirs()
    }
    new File(binFolder, "combined.js").withWriter { writer ->
        new File("src/shell.js").eachLine { line ->
            def lineToWrite
            if(line.length() > 0 && !SPECIAL_TAGS.contains(line)) {
                lineToWrite = new File("src/${line}/${line}.js").text
            } else {
                // TODO: special tags
                lineToWrite = ""
            }
            writer << lineToWrite
            writer << '\n'
        }
    }
}
